<!DOCTYPE HTML>
<html lang="zh-CN">
    <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>李二先生</title>
<meta name="description" content="李二先生的个博客，欢迎光临" />
<meta name="google-site-verification" content="FHNMdYV7a7Bw4HNt-vm0Cto8QvAW1Vx_rTrhMgxLg44" />
<link rel="shortcut icon" href="https://willisfusu.github.io/favicon.ico?v=1642265722835">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;700&family=Ubuntu:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
<script src="//code.bdstatic.com/npm/leancloud-storage@4.12.0/dist/av-min.js"></script>
<script src='https://willisfusu.github.io/media/Valine.min.js'></script>
<link rel="stylesheet" href="https://willisfusu.github.io/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="李二先生 - Atom Feed" href="https://willisfusu.github.io/atom.xml">
<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>

    </head>
    <body>
        <div id="read-progress"></div>
<div class="fixed-top">
    <nav class="navbar fixed-top navbar-expand-lg navbar-dark bg-dark">
       <a class="navbar-brand" href="https://willisfusu.github.io">李二先生</a>
       <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
       </button>
       <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto"></ul>
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="https://willisfusu.github.io/archives">「全部文章」</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="https://willisfusu.github.io/tag/will-tech">技术</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="https://willisfusu.github.io/tag/will-thinking">想法</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="https://willisfusu.github.io/tag/will-life">生活</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="">关于</a>
                </li>
            </ul>
       </div>
    </nav>
</div>

        <div class="container col-10" id="main" role="main">
            <div class="row">
                <div class="col-12 col-lg-8">
                    <article class="post">
                        <h1>
                            <a itemprop="url" class="post-title" href="https://willisfusu.github.io/post/Lenovo-M910q-OpenCore-Hackintosh/"> 联想 M910q open core 黑苹果装机遇「坑」记录</a>
                        </h1>
                        <p id="post-meta">
                            <i class="fa fa-clock-o"></i>2020-05-20 |
                            <i class="fa fa-tags"></i>
                                <a href="https://willisfusu.github.io/tag/will-tech/">技术</a>
                                
                                <a href="https://willisfusu.github.io/tag/h7LJMACgZ/">Hackintosh</a>
                                |
                            <i class="fa fa-book-reader"></i>5 min read
                        </p>
                        
                        
                            <blockquote class="fa fa-exclamation-triangle warning">
                                此文章发表于<strong><span style="color:#f75357">
                                        605</span></strong> 天前，请注意文章时效
                            </blockquote>
                            
                        <div class="post-content" itemprop="articleBody">
                            <p>因为疫情在家隔离已经快两个月了，学校不开门，实验室也不给进。无奈之下只好在家里「折腾」。因为之前在网上看到别人晒的联想 M920q 黑苹果装机，对于联想这个 Tiny 机型实在是心里种草，在 ebay 上搜索了下，发现有人出售 M910q 价格也比较合适，于是就拍下，准备搞黑苹果🐶。</p>
<!-- more -->
<h2 id="为什么有这篇文章">为什么有这篇文章</h2>
<p>因为自己以前在我的 T440P 上「折腾」过黑苹果，感觉现在的黑苹果安装已经非常简单，只要按照教程来，十有八九是可以成功的。但是我自己在安装 10.15.4 Catalina 的过程中遇到了很多指南上没有讲到或者是和指南推荐值不同的情况，为了对的起自己折腾花掉的时间，于是就把这些「坑」给记录下来。</p>
<h2 id="机器配置信息">机器配置信息</h2>
<p>CPU: i5-7600T</p>
<p>iGPU: intel HD graphics 630</p>
<p>Disk01: Samsung SSD 860 EVO 500G</p>
<p>Disk02: Samsung MZVLM128HEGR-000L1</p>
<p>Chipset: Q270</p>
<p>RAM: 16GB</p>
<h2 id="安装教程">安装教程</h2>
<p>推荐按照<a href="https://dortania.github.io/OpenCore-Desktop-Guide/">OpenCore-Desktop-Guide</a> 指南进行配置安装。个人感觉这个指南已经是很详细的了，并且最好的一点是该指南里基本将能用的到的 config 设置项给解释了一遍，按照这个指南进行安装，可以很好的了解到自己的设置到底是在设置些什么。 尤其是对于「非标准硬件」<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>用户，非常有用。</p>
<h2 id="我遇到的一些坑">我遇到的一些「坑」</h2>
<h3 id="休眠唤醒之后卡住-死机只能硬重启解决">休眠唤醒之后卡住、死机，只能硬重启解决</h3>
<p>其实这个问题不是我在 Opencore 下遇到的，是我在 Clover 下遇到的问题。我刚开始是使用 Clover 安装的，心里想着毕竟是一个受众非常广的引导方式了，就算是遇到了问题应该也可以很容易的在网上找到。安装完之后，除了休眠之外，都非常完美，没有什么问题。但是毕竟是处女座，总想是是不是可以修复。</p>
<p><strong>现象</strong> 可以休眠，也可以键盘，鼠标唤醒，但是在唤醒之后，系统很快就会「冻」住，无任何反应。</p>
<p>在网上搜了下，明确此问题会在以下情况下发生：</p>
<ul>
<li>使用了新的 AppleALC 补丁引起的问题</li>
<li>Clover 引导</li>
</ul>
<p>退回 AppleALC 1.2.8 版本可以解决此问题。具体问题可以见下面的搜索结果：<br>
<a href="https://hackintosher.com/guides/stop-macos-from-freezing-on-sleep-wake-with-a-catalina-hackintosh/">STOP MACOS FROM FREEZING DURING SLEEP/WAKE ON A CATALINA HACKINTOSH</a><br>
<a href="https://www.reddit.com/r/hackintosh/comments/diwujo/catalina_vanilla_installation_freeze_after_sleep/">Catalina vanilla installation - freeze after sleep</a><br>
<a href="https://blog.daliansky.net/Common-problems-and-solutions-in-macOS-Catalina-10.15-installation.html">关于数字音频中断，导致内核崩溃的解决方案</a></p>
<p>我尝试了下上面帖子中推荐的方法：</p>
<ol>
<li>退回 1.2.8 版本 --&gt; 退回旧版本之后，的确可以解决「冻死」的问题，但是声卡却无法驱动了，试了不同的 layout-id 也不成功，应该是 1.2.8 版本和 10.15.4 Catalina 不兼容的问题。</li>
<li>内核补丁 --&gt; 无效</li>
</ol>
<p>于是心里一横就准备换到 Opencore 下， <strong>问题解决</strong>。</p>
<h3 id="opencore-引导时提示-memory-panic-stackshot-succeeded-然后重启或者卡住">Opencore 引导时，提示 memory panic stackshot succeeded 然后重启或者卡住</h3>
<p>这种情况很有可能是没有分配 iGPU 的预留缓存，在 BIOS 中加入，或者在 Config 中添加 framebuffer-stolenmem 键。 这一个我找了个图片，图片如下：<br>
<img src="https://raw.githubusercontent.com/willisfusu/piconly/master/image/opencore.png" alt="" loading="lazy"></p>
<h3 id="卡在eblogexitbsstart">卡在[EB|#LOG:EXITBS:START]</h3>
<p>这个也是意料之外的问题，搜索了下，得到下面的帖子：</p>
<p><a href="https://www.reddit.com/r/hackintosh/comments/g7rqt1/if_youre_stuck_at_endrandomseed_or/">if you're stuck at &quot;EndRandomSeed&quot; OR [EB|#LOG:EXITBS:START] ERROR with OpenCore 0.5.7, try this to fix</a></p>
<p>需要将<br>
RebuildAppleMemoryMap switch it OFF<br>
SetupVirtualMap switch it ON<br>
但是这是与 Vanilla 指南中的推荐值是相反的，原指南中对此两项的说明如下，我的 CPU 是 i5-7600T Kaby Lake 应该就是按照指南中的值来设定，不知道是哪里出了问题。</p>
<pre><code class="language-ASL">RebuildAppleMemoryMap: YES
Generates Memory Map compatible with macOS, can break on some laptop OEM firmwares so if you receive early boot failures disable this
SetupVirtualMap: NO
Fixes SetVirtualAddresses calls to virtual addresses, not needed on Skylake and newer. Some firmware like Gigabyte may still require it, and will kernel panic without this
</code></pre>
<h2 id="仍然存在的问题">仍然存在的问题</h2>
<ol>
<li>长时间休眠唤醒死机。 是的，现在不是因为「冻住」了，短时间内休眠再唤醒没有问题，但是长时间比如几个小时，就无法唤醒了。 使用命令<code>pmset -g log | grep -i failure</code> ，显示： Darkwake Exit Failure。尝试了几个方法，都没有效果，于是只好使用 Coffee Buzz 让系统不休眠。</li>
</ol>
<p>总结一下，就是从一个唤醒问题，换到了另一个唤醒问题。😭😭😭😭 我折腾这一圈干啥！<br>
最后附上我<a href="https://github.com/willisfusu/Lenovo-M910q-Hackintosh">个人使用的EFI</a> <sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup></p>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p>非标准硬件是指和网上大多数教程使用的硬件不同的硬件，是我杜撰的名词🦁。 <a href="#fnref1" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn2" class="footnote-item"><p>仅作参考使用，在使用前建议先阅读 Open core 安装指南。 <a href="#fnref2" class="footnote-backref">↩︎</a></p>
</li>
</ol>
</section>

                        </div>
                         <blockquote>
                             <p>本文链接：<a style="text-decoration: underline" href="https://willisfusu.github.io/post/Lenovo-M910q-OpenCore-Hackintosh/">https://willisfusu.github.io/post/Lenovo-M910q-OpenCore-Hackintosh/</a></p>
                             <p>此文章由<a style="text-decoration: underline" href="https://willisfusu.github.io/">李二先生</a>采用<a style="text-decoration: underline" href="https://creativecommons.org/licenses/by-sa/4.0/">知识共享署名-相同方式共享 4.0 国际许可协议</a>进行许可,转载请注明出处。
                             </p>
                         </blockquote>
                    </article>
                    <ul class="post-near">
                        
                        <li>上一篇<a href="https://willisfusu.github.io/post/jin-ri-tou-tiao-1/">今日头条新闻评论获取</a> </li>
                        
                        
                        <li>上一篇<a href="https://willisfusu.github.io/post/our-library/">Our Library 响应式网页编写反思记录</a> </li>
                        
                    </ul>
                    <div id="vcomment"></div>
                        <script>
                            new Valine({
                            el: '#vcomment',
                            appId: '62yofvjrBSK8xn2MoylBkRUJ-MdYXbMMI',
                            appKey: 'cfVwB8TO3A8o6l4Uo1h6OR9M',
                            avatar:"retro",
                            serverURLs:'https://62yofvjr.api.lncldglobal.com'
                        })
                        </script>
                </div>
                <div class="col-12 col-lg-4" id="secondary" role="complementary">
    <div class="card">
        <div class="card-header">
            <div class="widget-title">🚀 关于李二先生</div>
        </div>
        <div class="card-body">
            <section class="tagline">
    Hey There, I'm <view class="under"><text class="textCon">WEI LI,</text><text class="borderText-lg"></text></view>
</section><br/>
<section class="desc">based in Manchester, UK.</section><br/>
<section class="tagline">A PhD Student in Materials</section>
<section class="desc">Focus on <view class="under"><text class="textCon">Graphene and Ceramic</text><text class="borderText-sm"></text> Composites.</view></section><br/>
<section class="tagline">And know a little about coding.</section>
<section class="desc">Maybe Just A Learner 🎉🤣</section>
        </div>
    </div>
    <div class="card" id="tag-card">
        <div class="card-header">
            <div class="widget-title">🏷️ 标签</div>
        </div>
        <div class="card-body">
            <div class="toc-container">
                <p style="margin-bottom: .5rem;">暂时完成，没有美化</p>
                
                    <li class="tag"> 🎉 <a href="https://willisfusu.github.io/tag/will-tech/">技术</a></li>
                
                    <li class="tag"> 🎉 <a href="https://willisfusu.github.io/tag/h7LJMACgZ/">Hackintosh</a></li>
                
            </div>
        </div>
    </div>
    <div class="card" id="toc-card">
        <div class="card-header">
            <div class="widget-title">📒 目录</div>
        </div>
        <div class="card-body">
                <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E6%9C%89%E8%BF%99%E7%AF%87%E6%96%87%E7%AB%A0">为什么有这篇文章</a></li>
<li><a href="#%E6%9C%BA%E5%99%A8%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF">机器配置信息</a></li>
<li><a href="#%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B">安装教程</a></li>
<li><a href="#%E6%88%91%E9%81%87%E5%88%B0%E7%9A%84%E4%B8%80%E4%BA%9B%E5%9D%91">我遇到的一些「坑」</a>
<ul>
<li><a href="#%E4%BC%91%E7%9C%A0%E5%94%A4%E9%86%92%E4%B9%8B%E5%90%8E%E5%8D%A1%E4%BD%8F-%E6%AD%BB%E6%9C%BA%E5%8F%AA%E8%83%BD%E7%A1%AC%E9%87%8D%E5%90%AF%E8%A7%A3%E5%86%B3">休眠唤醒之后卡住、死机，只能硬重启解决</a></li>
<li><a href="#opencore-%E5%BC%95%E5%AF%BC%E6%97%B6%E6%8F%90%E7%A4%BA-memory-panic-stackshot-succeeded-%E7%84%B6%E5%90%8E%E9%87%8D%E5%90%AF%E6%88%96%E8%80%85%E5%8D%A1%E4%BD%8F">Opencore 引导时，提示 memory panic stackshot succeeded 然后重启或者卡住</a></li>
<li><a href="#%E5%8D%A1%E5%9C%A8eblogexitbsstart">卡在[EB|#LOG:EXITBS:START]</a></li>
</ul>
</li>
<li><a href="#%E4%BB%8D%E7%84%B6%E5%AD%98%E5%9C%A8%E7%9A%84%E9%97%AE%E9%A2%98">仍然存在的问题</a></li>
</ul>
</li>
</ul>

        </div>
    </div>
</div>

            </div>
        </div>  
        <div class="row justify-content-md-center">
            <div class="col-8">
                <script src="https://f.convertkit.com/ckjs/ck.5.js"></script>
<form action="https://app.convertkit.com/forms/2875524/subscriptions" class="seva-form formkit-form" method="post"
    data-sv-form="2875524" data-uid="6d123a6cda" data-format="inline" data-version="5"
    data-options="{&quot;settings&quot;:{&quot;after_subscribe&quot;:{&quot;action&quot;:&quot;message&quot;,&quot;success_message&quot;:&quot;Success! Now check your email to confirm your subscription.&quot;,&quot;redirect_url&quot;:&quot;&quot;},&quot;analytics&quot;:{&quot;google&quot;:null,&quot;facebook&quot;:null,&quot;segment&quot;:null,&quot;pinterest&quot;:null,&quot;sparkloop&quot;:null,&quot;googletagmanager&quot;:null},&quot;modal&quot;:{&quot;trigger&quot;:&quot;timer&quot;,&quot;scroll_percentage&quot;:null,&quot;timer&quot;:5,&quot;devices&quot;:&quot;all&quot;,&quot;show_once_every&quot;:15},&quot;powered_by&quot;:{&quot;show&quot;:true,&quot;url&quot;:&quot;https://convertkit.com/features/forms?utm_campaign=poweredby&amp;utm_content=form&amp;utm_medium=referral&amp;utm_source=dynamic&quot;},&quot;recaptcha&quot;:{&quot;enabled&quot;:false},&quot;return_visitor&quot;:{&quot;action&quot;:&quot;hide&quot;,&quot;custom_content&quot;:&quot;&quot;},&quot;slide_in&quot;:{&quot;display_in&quot;:&quot;bottom_right&quot;,&quot;trigger&quot;:&quot;timer&quot;,&quot;scroll_percentage&quot;:null,&quot;timer&quot;:5,&quot;devices&quot;:&quot;all&quot;,&quot;show_once_every&quot;:15},&quot;sticky_bar&quot;:{&quot;display_in&quot;:&quot;top&quot;,&quot;trigger&quot;:&quot;timer&quot;,&quot;scroll_percentage&quot;:null,&quot;timer&quot;:5,&quot;devices&quot;:&quot;all&quot;,&quot;show_once_every&quot;:15}},&quot;version&quot;:&quot;5&quot;}"
    min-width="400 500 600 700 800">
    <p class="formp">
        🎉🎉🎉 我开通了Newsletter，欢迎订阅！ 🎉🎉🎉
    </p>
    <div data-style="clean">
        <ul class="formkit-alert formkit-alert-error" data-element="errors" data-group="alert"></ul>
        <div data-element="fields" data-stacked="false" class="seva-fields formkit-fields">
            <div class="formkit-field"><input class="formkit-input" name="email_address" aria-label="Email Address"
                    placeholder="Email Address" required="" type="email"
                    style="color: rgb(0, 0, 0); border-color: rgb(227, 227, 227); border-radius: 4px; font-weight: 400;">
            </div><button data-element="submit" class="formkit-submit formkit-submit"
                style="color: rgb(255, 255, 255); background-color: rgb(251, 105, 112); border-radius: 4px; font-weight: 400;">
                <div class="formkit-spinner">
                    <div></div>
                    <div></div>
                    <div></div>
                </div><span class="">Subscribe</span>
            </button>
        </div>
        <div class="formkit-powered-by-convertkit-container"><a
                href="https://convertkit.com/features/forms?utm_campaign=poweredby&amp;utm_content=form&amp;utm_medium=referral&amp;utm_source=dynamic"
                data-element="powered-by" class="formkit-powered-by-convertkit" data-variant="dark" target="_blank"
                rel="noopener noreferrer">Built with ConvertKit</a></div>
    </div>
</form>
                <!-- <p>
                    🎉🎉🎉 我开通了Newsletter，欢迎订阅！ 🎉🎉🎉
                </p>
                <script async data-uid="6d123a6cda" src="https://astounding-crafter-9073.ck.page/6d123a6cda/index.js"></script>    
                </div>   -->
            </div>    
        </div>  
        <div class="row justify-content-md-center">
    <div class="col-8">
        <footer class="footer bottom" role="contentinfo">
            <a class="turn-up" href="#"><i class="fa fa-rocket"></i></a>
            <div id="dark-mode">
                <i class="fa fa-moon-o"></i>
            </div>
            <!-- <script async data-uid="6d123a6cda" src="https://astounding-crafter-9073.ck.page/6d123a6cda/index.js"></script> -->
            Theme <a href="https://github.com/willisfusu/gridea-theme-SSRUI">SSRUI</a> made with <i
                class="fa fa-heart"></i> by <a href="https://willisfusu.github.io/">Wei LI</a>, modified from 🍀<a
                href="https://github.com/idealclover/Clover">Clover</a>🍀.<br />
            Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>.<br />
                &copy; 
                    2022 <a href="https://willisfusu.github.io">
                            李二先生
                        </a>.
                        <div id="span_dt_dt"></div>
                        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.15.0/dist/umd/popper.min.js"></script>
                        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"></script>
                        <script src="https://willisfusu.github.io/media/mouse-click.js"></script>
                        <script src="https://willisfusu.github.io/media/pace.min.js"></script>
                        <script src="https://willisfusu.github.io/media/prism.js"></script>
                        <script src="https://willisfusu.github.io/media/main_function.js"></script>
                        <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
                        <script>mermaid.initialize({ startOnLoad: true });</script>
        </footer>
    </div>
    </body>
</html>
